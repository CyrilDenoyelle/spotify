$(document).ready(function(){function e(e){$("#guessInput").hide(),$("#guessBtn").hide(),this.time=e,this.start=function(){clearInterval(l),l=setInterval(t,1e3),t()},this.hard=function(){clearInterval(l),l=setInterval(t,100),t()},this.stop=function(){r()}}function t(){S.time-=1;var e=Math.floor(S.time/60),t=S.time-60*e;10>t&&(t="0"+t),10>e&&(e="0"+e),S.time<=0&&(r(),n(),a("highlander")),$("#timer").html(e+":"+t)}function r(){clearInterval(l),S.time=61,$("#timer").html("01:00")}function n(){$("#over").html("GAME OVER"),$("#over").show(),$("#start").show(),$("#hard").show(),$("#result").empty(),$("#next").hide(),$("#guessInput").val(""),$("#guessInput").hide(),$("#guessBtn").hide(),r(),i()}function o(){d="",$("#hiScores").empty();for(var e in g)d+="<h2>"+g[e]+": "+e+"</h2>";$("#hiScores").html(d)}function i(){var e=Object.keys(g).map(function(e){return e}),t=Math.min.apply(null,e),r=Math.max.apply(null,e);if(c>t||e.length<3){var n=prompt("Bravo, tu as réalisé un high-score! Entre ton nom : ");g[c]=n,a("hiscore")}c>r&&a("champion"),Object.keys(g).length>3&&delete g[t],localStorage.setItem("hiScores",JSON.stringify(g)),g=JSON.parse(localStorage.getItem("hiScores")),o()}function a(e){e="#"+e,$("#achievements").children(e).attr("class").includes("alert-warning")&&($("#achievements").children(e).children(".glyphicon-star").show(),$("#achievements").children(e).children(".glyphicon-star-empty").hide(),$("#achievements").children(e).toggleClass("alert-warning"),$("#achievements").children(e).toggleClass("alert-success"))}function s(){var e=document.getElementById("guessInput").value;h>e&&$("#result").html("Le nombre mystère est plus grand !"),e>h&&$("#result").html("Le nombre mystère est plus petit !"),e==h&&(1==u&&(a("gontran"),f++,f>3&&a("cheater")),7==h&&a("seven"),$("#result").html("Bravo ! le nombre mystère était bien "+h),$("#next").html("Nouveau chiffre!"),$("#next").show(),c+=5-u,$("#score").html("Score : "+c),h=Math.floor(9*Math.random()+1),$("#konami").html("Solution : "+h),u=0,a("grand"),p++,p>3&&a("lepers")),m="<img src='img/heart.png'>".repeat(3-u),$("#life").html(m),u++,u>3&&n()}var l,h,c,m,u=1,g=(localStorage,JSON.parse(localStorage.getItem("hiScores"))),d="",p=0,f=0;$('[data-toggle="tooltip"]').tooltip(),$("#achievements").children("div").children(".glyphicon-star").hide(),$("#konami").hide(),localStorage.clear(),localStorage.setItem("hiScores",JSON.stringify({1:"LDE",2:"LDE",3:"LDE"})),g=JSON.parse(localStorage.getItem("hiScores")),o();var S=new e(61,0);$("#start").click(function(){h=Math.floor(9*Math.random()+1),$("#konami").html("Solution : "+h),S.start(),$("#start").hide(),$("#hard").hide(),$("#over").hide(),$("#guessInput").show(),$("#guessBtn").show(),u=1,c=0,$("#score").html("Score : "+c),m="<img src='img/heart.png'>".repeat(3),$("#life").html(m);JSON.parse(localStorage.getItem("hiScores"));p=0,f=0}),$("#hard").click(function(){h=Math.floor(9*Math.random()+1),$("#konami").html("Solution : "+h),S.hard(),$("#start").hide(),$("#hard").hide(),$("#over").hide(),$("#guessInput").show(),$("#guessBtn").show(),u=1,c=0,$("#score").html("Score : "+c),m="<img src='img/heart.png'>".repeat(3),$("#life").html(m);JSON.parse(localStorage.getItem("hiScores"));p=0,f=0});var v=[38,38,40,40,37,39,37,39,66,65],y=0;$(document).keydown(function(e){if(e.keyCode===v[y++]){if(y===v.length)return $("#konami").show(),y=0,!1}else y=0}),$("#guessForm").submit(function(){$("#next").hide(),s()}),$("#guessBtn").click(function(){$("#guessForm").submit()})});